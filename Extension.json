{
  "author": "@achubutkin",
  "description": "An extension for Yandex.Games SDK that lets you easily integrate games created by GDevelop into the Yandex.Games platform. The extension provides the following features:\n\n* Set up automatic switching to full screen mode\n* Set up screen orientation during the game and add a rotate device prompt\n* In-game purchases\n* Player details (user login, in-game data, user profile data)\n* Game rating\n* Manage ads (interstitial ad, rewarded videos)\n* Competition tables \n",
  "extensionNamespace": "",
  "fullName": "Yandex.Games SDK",
  "helpPath": "https://github.com/achubutkin/yandex-games-sdk-gdevelop-extension",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBkPSJNMjMsMjhMMjMsMjhjLTEuMSwwLTIuMS0wLjctMi41LTEuOGMwLTAuMSwwLTAuMi0wLjEtMC4yaC04LjljMCwwLjEsMCwwLjItMC4xLDAuMkMxMS4xLDI3LjMsMTAuMSwyOCw5LDI4aDANCgljLTAuNiwwLTEsMC40LTEsMXMwLjQsMSwxLDFoMTRjMC42LDAsMS0wLjQsMS0xUzIzLjYsMjgsMjMsMjh6Ii8+DQo8Zz4NCgk8cGF0aCBkPSJNMTYuOSwxMC45djQuNWMwLjksMC4zLDEuNywwLjYsMi41LDFsMC42LDAuM3YtN2wtMC42LDAuM0MxOC42LDEwLjMsMTcuOCwxMC42LDE2LjksMTAuOXoiLz4NCgk8cGF0aCBkPSJNMjcsM0g1QzMuMywzLDIsNC4zLDIsNnYxNWMwLDEuNywxLjMsMywzLDNoNi45aDguMUgyN2MxLjcsMCwzLTEuMywzLTNWNkMzMCw0LjMsMjguNywzLDI3LDN6IE0yMiwxOC4zDQoJCWMwLDAuMy0wLjIsMC43LTAuNSwwLjljLTAuMiwwLjEtMC4zLDAuMS0wLjUsMC4xYy0wLjIsMC0wLjMsMC0wLjUtMC4xbC0yLTFjLTAuNS0wLjMtMS0wLjUtMS42LTAuN1YyMGMwLDAuNi0wLjQsMS0xLDFoLTIuNQ0KCQljLTAuNCwwLTAuNy0wLjItMC45LTAuNmwtMi4zLTQuNkM5LjUsMTUuMSw5LDE0LjIsOSwxMy4xYzAtMiwxLjYtMy42LDMuNS0zLjZjMi4xLDAsNC4xLTAuNSw2LTEuNGwyLjEtMWMwLjMtMC4yLDAuNy0wLjEsMSwwDQoJCUMyMS44LDcuMywyMiw3LjcsMjIsOFYxOC4zeiIvPg0KPC9nPg0KPC9zdmc+DQo=",
  "name": "YandexGamesSDK_pre_1",
  "previewIconUrl": "https://raw.githubusercontent.com/achubutkin/yandex-games-sdk-gdevelop-extension/main/SEO_advertising_internet_marketing_screen.svg?token=AFHX5ZBORDL6ZKV53OMPGGTBGD3RE",
  "shortDescription": "An extension for Yandex.Games SDK that lets you easily integrate games created by GDevelop into the Yandex.Games platform.",
  "version": "2.0.0",
  "tags": [
    "yandex",
    "sdk",
    "ads"
  ],
  "dependencies": [],
  "eventsFunctions": [
    {
      "description": "Initialize the Yandex.Games SDK",
      "fullName": "Initialize the Yandex.Games SDK",
      "functionType": "Action",
      "name": "Init",
      "private": false,
      "sentence": "Initialize the Yandex.Games SDK (fullscreen: _PARAM1_, orientation: _PARAM2_, lock orientation: _PARAM3_)",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "var prefix = \"__YandexGamesSDK_\";\nvar globalVarsRef = runtimeScene.getGame().getVariables();\n\nfunction getPrefixingString(str) {\n    return prefix + str;\n}\n\nvar isInitVar = globalVarsRef.get(getPrefixingString(\"IsInit\"));\n\nisInitVar.setBoolean(false);\nglobalVarsRef.add(isInitVar);\n\n// Load and init Yandex.Games SDK\nvar options = {\n    fullscreen: eventsFunctionContext.getArgument(\"fullscreen\"),\n    orientation: {\n        value: eventsFunctionContext.getArgument(\"orientation\") || \"portrait\",\n        lock: eventsFunctionContext.getArgument(\"lock\")\n    }\n};\n\n(function (d, s, id) {\n    var js,\n        fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) {\n        isInitVar.setBoolean(true);\n        globalVarsRef.add(isInitVar);\n        return;\n    };\n    js = d.createElement(s);\n    js.id = id;\n    js.src = \"https://yandex.ru/games/sdk/v2\";\n    js.onload = function () {\n        YaGames\n            .init(options)\n            .then(function (instance) {\n                // Set as global object\n                gdjs._YandexGamesSDK.setInstance(instance);\n\n                isInitVar.setBoolean(true);\n                globalVarsRef.add(isInitVar);\n            });\n    };\n    js.onerror = function (ev) {\n        console.warn(ev);\n    };\n    fjs.parentNode.insertBefore(js, fjs);\n})(document, \"script\", \"yagames-jssdk\");\n\n// Extension`s methods\nfunction setFunctionContextCallback(isSuccess, _eventsFunctionContext) {\n    var state = isSuccess ? \"ok\" : \"error\";\n    var callbackVarName = _eventsFunctionContext.getArgument(\"CallbackVariableName\");\n    if (callbackVarName) {\n        var callbackVar = globalVarsRef.get(callbackVarName);\n        callbackVar.setString(state);\n        globalVarsRef.add(callbackVarName, callbackVar);\n    }\n}\n\nfunction setCallback(isSuccess, callbackVarName) {\n    var state = isSuccess ? \"ok\" : \"error\";\n    var prefixingCallbackVarName = getPrefixingString(callbackVarName)\n    var callbackVar = globalVarsRef.get(prefixingCallbackVarName);\n    callbackVar.setString(state);\n    globalVarsRef.add(prefixingCallbackVarName, callbackVar);\n}\n\nfunction setFunctionContextJsonCallback(json, _eventsFunctionContext) {\n    var resultVarName = _eventsFunctionContext.getArgument(\"ResultVariableName\");\n    if (resultVarName) {\n        var resultVar = globalVarsRef.get(resultVarName);\n        gdjs.evtTools.network.jsonToVariableStructure(json, resultVar);\n        globalVarsRef.add(resultVarName, resultVar);\n    }\n}\n\ngdjs._YandexGamesSDK = {\n    getInstance: function () {\n        return window[getPrefixingString(\"instance\")];\n    },\n    setInstance: function (instance) {\n        window[getPrefixingString(\"instance\")] = instance;\n    },\n    getPlayerInstance: function () {\n        return window[getPrefixingString(\"player\")];\n    },\n    setPlayerInstance: function (player) {\n        window[getPrefixingString(\"player\")] = player;\n    },\n    getPaymentsInstance: function () {\n        return window[getPrefixingString(\"payments\")];\n    },\n    setPaymentsInstance: function (payments) {\n        window[getPrefixingString(\"payments\")] = payments;\n    },\n    getGlobalVariable: function (name) {\n        return globalVarsRef.get(name);\n    },\n    setGlobalVariable: function (name, value) {\n        var globalVar = globalVarsRef.get(name);\n        switch (typeof value) {\n            case \"object\":\n                gdjs.evtTools.network.jsonToVariableStructure(JSON.stringify(value), globalVar);\n                break;\n            default:\n                globalVar.setValue(value);\n                break;\n        };\n        globalVarsRef.add(globalVar);\n    },\n    setFunctionContextCallback: setFunctionContextCallback,\n    setCallback: setCallback,\n    setFunctionContextJsonCallback: setFunctionContextJsonCallback,\n    getPrefixingString: getPrefixingString,\n    getExtensionPrefix: function () {\n        return prefix;\n    }\n}\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Fullscreen (switch to full-screen mode when opening a game or on the first user action)",
          "longDescription": "",
          "name": "fullscreen",
          "optional": false,
          "supplementaryInformation": "",
          "type": "yesorno"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Screen orientation",
          "longDescription": "If not set portrait default",
          "name": "orientation",
          "optional": false,
          "supplementaryInformation": "[\"portrait\",\"landscape\"]",
          "type": "stringWithSelector"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Lock the orientation of the screen?",
          "longDescription": "",
          "name": "lock",
          "optional": false,
          "supplementaryInformation": "",
          "type": "yesorno"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Yandex Games SDK initialized",
      "fullName": "Yandex Games SDK initialized",
      "functionType": "Condition",
      "name": "Initialized",
      "private": false,
      "sentence": "Yandex Games SDK initialized",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "GlobalVariableAsBoolean"
              },
              "parameters": [
                "__YandexGamesSDK_IsInit",
                "True"
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Show the interstitial ad",
      "fullName": "Show the interstitial ad",
      "functionType": "Action",
      "name": "ShowInterstitialAd",
      "private": false,
      "sentence": "Show the interstitial ad",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::Initialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var resultVarName = gdjs._YandexGamesSDK.getPrefixingString(\"InterstitialAdResult\");\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getInstance().adv.showFullscreenAdv({\r\n        callbacks: {\r\n            onOpen: function () {\r\n                gdjs._YandexGamesSDK.setGlobalVariable(resultVarName, \"open\");\r\n            },\r\n            onClose: function (wasShown) {\r\n                gdjs._YandexGamesSDK.setGlobalVariable(resultVarName, wasShown ? \"was_shown_closed\" : \"just_closed\");\r\n            },\r\n            onError: function (err) {\r\n                gdjs._YandexGamesSDK.setGlobalVariable(resultVarName, \"error\");\r\n                console.warn(\"Error trying to show a fullscreen ad\", err);\r\n            },\r\n            onOffline: function () {\r\n                gdjs._YandexGamesSDK.setGlobalVariable(resultVarName, \"offline\");\r\n            }\r\n        }\r\n    });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setGlobalVariable(resultVarName, \"error\");\r\n    console.warn(\"Error trying to show a fullscreen ad\", err);\r\n};\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Interstitial ad opened",
      "fullName": "Interstitial ad opened",
      "functionType": "Condition",
      "name": "InterstitialAdOpened",
      "private": false,
      "sentence": "Interstitial ad opened",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_InterstitialAdResult",
                "=",
                "\"open\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Interstitial ad was shown",
      "fullName": "Interstitial ad was shown",
      "functionType": "Condition",
      "name": "InterstitialAdWasShown",
      "private": false,
      "sentence": "Interstitial ad was shown",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_InterstitialAdResult",
                "=",
                "\"was_shown_closed\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Interstitial ad closed",
      "fullName": "Interstitial ad closed",
      "functionType": "Condition",
      "name": "InterstitialAdClosed",
      "private": false,
      "sentence": "Interstitial ad closed (was shown _PARAM1_)?",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "BuiltinCommonInstructions::Or"
              },
              "parameters": [],
              "subInstructions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "BuiltinCommonInstructions::And"
                  },
                  "parameters": [],
                  "subInstructions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "GetArgumentAsBoolean"
                      },
                      "parameters": [
                        "\"IsWasShown\""
                      ],
                      "subInstructions": []
                    },
                    {
                      "type": {
                        "inverted": false,
                        "value": "VarGlobalTxt"
                      },
                      "parameters": [
                        "__YandexGamesSDK_InterstitialAdResult",
                        "=",
                        "\"was_shown_closed\""
                      ],
                      "subInstructions": []
                    }
                  ]
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "BuiltinCommonInstructions::And"
                  },
                  "parameters": [],
                  "subInstructions": [
                    {
                      "type": {
                        "inverted": true,
                        "value": "GetArgumentAsBoolean"
                      },
                      "parameters": [
                        "\"IsWasShown\""
                      ],
                      "subInstructions": []
                    },
                    {
                      "type": {
                        "inverted": false,
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "inverted": false,
                            "value": "VarGlobalTxt"
                          },
                          "parameters": [
                            "__YandexGamesSDK_InterstitialAdResult",
                            "=",
                            "\"just_closed\""
                          ],
                          "subInstructions": []
                        },
                        {
                          "type": {
                            "inverted": false,
                            "value": "VarGlobalTxt"
                          },
                          "parameters": [
                            "__YandexGamesSDK_InterstitialAdResult",
                            "=",
                            "\"was_shown_closed\""
                          ],
                          "subInstructions": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Is was shown?",
          "longDescription": "",
          "name": "IsWasShown",
          "optional": false,
          "supplementaryInformation": "",
          "type": "yesorno"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Interstitial ad failed",
      "fullName": "Interstitial ad failed",
      "functionType": "Condition",
      "name": "InterstitialAdFailed",
      "private": false,
      "sentence": "Interstitial ad failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_InterstitialAdResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Show the rewarded video",
      "fullName": "Show the rewarded video",
      "functionType": "Action",
      "name": "ShowRewardedVideo",
      "private": false,
      "sentence": "Show the rewarded video",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::Initialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var resultVarName = \"RewardedVideoResult\";\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getInstance().adv.showRewardedVideo({\r\n        callbacks: {\r\n            onOpen: function () {\r\n                gdjs._YandexGamesSDK.setGlobalVariable(resultVarName, \"open\");\r\n            },\r\n            onRewarded: function () {\r\n                gdjs._YandexGamesSDK.setGlobalVariable(resultVarName, \"rewarded\");\r\n            },\r\n            onClose: function () {\r\n                gdjs._YandexGamesSDK.setGlobalVariable(resultVarName, \"closed\");\r\n            },\r\n            onError: function (err) {\r\n                gdjs._YandexGamesSDK.setGlobalVariable(resultVarName, \"error\");\r\n                console.warn(err);\r\n            }\r\n        }\r\n    });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setGlobalVariable(resultVarName, \"error\");\r\n    console.warn(\"Error while showing a rewarded video\", err);\r\n};\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Rewarded video opened",
      "fullName": "Rewarded video opened",
      "functionType": "Condition",
      "name": "RewardedVideoOpened",
      "private": false,
      "sentence": "Rewarded video opened",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_RewardedVideoResult",
                "=",
                "\"open\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Rewarded video rewarded",
      "fullName": "Rewarded video rewarded",
      "functionType": "Condition",
      "name": "RewardedVideoRewarded",
      "private": false,
      "sentence": "Rewarded video rewarded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_RewardedVideoResult",
                "=",
                "\"rewarded\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Rewarded video closed",
      "fullName": "Rewarded video closed",
      "functionType": "Condition",
      "name": "RewardedVideoClosed",
      "private": false,
      "sentence": "Rewarded video closed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_RewardedVideoResult",
                "=",
                "\"closed\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Rewarded video failed",
      "fullName": "Rewarded video failed",
      "functionType": "Condition",
      "name": "RewardedVideoFailed",
      "private": false,
      "sentence": "Rewarded video failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_RewardedVideoResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Init player",
      "fullName": "Init player",
      "functionType": "Action",
      "name": "InitPlayer",
      "private": false,
      "sentence": "Init player with scopes _PARAM1_ and signed _PARAM2_ and open auth dialog _PARAM3_ and photo size _PARAM4_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::Initialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var globalsVarsRef = runtimeScene.getGame().getVariables();\r\nvar resultVarName = gdjs._YandexGamesSDK.getPrefixingString(\"Player\");\r\nvar resultVar = globalsVarsRef.get(resultVarName);\r\nvar instance = gdjs._YandexGamesSDK.getInstance();\r\n\r\nvar photoSize = eventsFunctionContext.getArgument(\"PhotoSize\") || \"small\";\r\n\r\nfunction addChildVarToVar(name, value, gdjsVar) {\r\n    var childVar = new gdjs.Variable({\r\n        name: name, value: value\r\n    });\r\n\r\n    childVar.setString(value);\r\n    return gdjsVar.addChild(name, childVar);\r\n}\r\n\r\nvar options = {\r\n    scopes: !!eventsFunctionContext.getArgument(\"Scopes\"),\r\n    signed: !!eventsFunctionContext.getArgument(\"Signed\")\r\n};\r\n\r\nfunction initPlayer() {\r\n    return instance.getPlayer(options)\r\n        .then(function (player) {\r\n            // Player logged in.\r\n            addChildVarToVar(\"id\", player.getUniqueID(), resultVar);\r\n\r\n            if (!!eventsFunctionContext.getArgument(\"Scopes\")) {\r\n                addChildVarToVar(\"name\", player.getName(), resultVar);\r\n                addChildVarToVar(\"photo\", player.getPhoto(photoSize), resultVar);\r\n            }\r\n\r\n            if (!!eventsFunctionContext.getArgument(\"Signed\")) {\r\n                addChildVarToVar(\"signature\", player.signature, resultVar);\r\n            }\r\n\r\n            globalsVarsRef.add(resultVarName, resultVar);\r\n            gdjs._YandexGamesSDK.setPlayerInstance(player);\r\n        });\r\n}\r\n\r\ninitPlayer()\r\n    .catch(function (error) {\r\n        console.warn(error);\r\n\r\n        if (!!eventsFunctionContext.getArgument(\"OpenAuthDialog\")) {\r\n            instance.auth.openAuthDialog()\r\n                .then(function () {\r\n                    initPlayer();\r\n                }).catch(function () {\r\n                    console.warn(\"Player not logged in.\");\r\n                });\r\n        }\r\n    });\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Scopes",
          "longDescription": "",
          "name": "Scopes",
          "optional": false,
          "supplementaryInformation": "",
          "type": "trueorfalse"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Signed",
          "longDescription": "",
          "name": "Signed",
          "optional": false,
          "supplementaryInformation": "",
          "type": "trueorfalse"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Open auth dialog if user not logged in?",
          "longDescription": "",
          "name": "OpenAuthDialog",
          "optional": false,
          "supplementaryInformation": "",
          "type": "trueorfalse"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Photo size of user`s avatar",
          "longDescription": "",
          "name": "PhotoSize",
          "optional": false,
          "supplementaryInformation": "[\"small\",\"medium\",\"large\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Player initialized",
      "fullName": "Player initialized",
      "functionType": "Condition",
      "name": "PlayerInitialized",
      "private": false,
      "sentence": "Player initialized",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::Initialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "if (gdjs._YandexGamesSDK.getPlayerInstance() !== undefined) {\n    eventsFunctionContext.returnValue = true;\n}\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load the player data",
      "fullName": "Load the player data",
      "functionType": "Action",
      "name": "LoadPlayerData",
      "private": false,
      "sentence": "Load the player data to _PARAM2_ variable from _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var globalVarsRef = runtimeScene.getGame().getVariables();\nvar callbackVarName = \"LoadPlayerDataResult\";\nvar keysVariableName = eventsFunctionContext.getArgument(\"KeysOrThatVariableName\");\nvar keys = [];\n\ntry {\n    if (keysVariableName && globalVarsRef.has(keysVariableName)) {\n        keys = globalVarsRef.get(keysVariableName)\n            .getAllChildrenArray().map(function (item) {\n                return item.getValue();\n            });\n    } else {\n        keys = keysVariableName.toString().split(',');\n    }\n} catch (err) {\n    console.warn(err);\n}\n\ngdjs._YandexGamesSDK.setCallback(false, callbackVarName);\n\ntry {\n    gdjs._YandexGamesSDK.getPlayerInstance()\n        .getData(keys)\n        .then(function (data) {\n            gdjs._YandexGamesSDK.setFunctionContextJsonCallback(JSON.stringify(data), eventsFunctionContext);\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\n        })\n        .catch(function (err) {\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\n            console.warn(err);\n        });\n} catch (err) {\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\n    console.warn(err);\n}\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Keys or global variable name",
          "longDescription": "Keys with comma delimiter e.g. \"key1, key2, key3\" or global variable name that contains array value with keys",
          "name": "KeysOrThatVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store loaded data",
          "longDescription": "",
          "name": "ResultVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Load the player data succeeded",
      "fullName": "Load the player data succeeded",
      "functionType": "Condition",
      "name": "LoadPlayerDataSucceeded",
      "private": false,
      "sentence": "Load the player data succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadPlayerDataResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load the player data failed",
      "fullName": "Load the player data failed",
      "functionType": "Condition",
      "name": "LoadPlayerDataFailed",
      "private": false,
      "sentence": "Load the player data failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadPlayerDataResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Save the player data",
      "fullName": "Save the player data",
      "functionType": "Action",
      "name": "SavePlayerData",
      "private": false,
      "sentence": "Save the player data to _PARAM1_ from _PARAM2_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var sceneVarsRef = runtimeScene.getVariables();\r\nvar callbackVarName = \"SavePlayerDataResult\";\r\nvar keyVarName = eventsFunctionContext.getArgument(\"KeyVariableName\")\r\nvar contentVarName = eventsFunctionContext.getArgument(\"ContentVariableName\");\r\nvar contentVar = sceneVarsRef.get(contentVarName);\r\n\r\ngdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n\r\ntry {\r\n    var data = null;\r\n\r\n    if (contentVar.isStructure()) {\r\n        data = JSON.parse({\r\n            [keyVariable]: gdjs.evtTools.network.variableStructureToJSON(contentVar)\r\n        });\r\n    } else if (contentVar.isPrimitive()) {\r\n        data = {\r\n            [keyVariable]: contentVar.getValue()\r\n        };\r\n    }\r\n\r\n    gdjs._YandexGamesSDK.getPlayerInstance().setData(data)\r\n        .then(function () {\r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n        })\r\n        .catch(function (err) {\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n            console.warn(err);\r\n        });\r\n} catch (err) {\r\n    console.warn(err);\r\n    _YandexGamesSDK.setCallback(false, callbackVarName);\r\n}\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Data key name (e.g. \"Lives\")",
          "longDescription": "",
          "name": "KeyVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Scene variable (number, string or structure) with the content to save",
          "longDescription": "",
          "name": "ContentVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Save the player data succeeded",
      "fullName": "Save the player data succeeded",
      "functionType": "Condition",
      "name": "SavePlayerDataSucceeded",
      "private": false,
      "sentence": "Save the player data succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_SavePlayerDataResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Save the player data failed",
      "fullName": "Save the player data failed",
      "functionType": "Condition",
      "name": "SavePlayerDataFailed",
      "private": false,
      "sentence": "Save the player data failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_SavePlayerDataResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load the player stats",
      "fullName": "Load the player stats",
      "functionType": "Action",
      "name": "LoadPlayerStats",
      "private": false,
      "sentence": "Load the player stats to _PARAM2_ number variable from _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var sceneVarsRef = runtimeScene.getVariables();\nvar callbackVarName = \"LoadPlayerStatsResult\";\nvar keysVarName = eventsFunctionContext.getArgument(\"KeysOrThatVariableName\");\nvar keys = [];\n\ntry {\n    if (keysVarName && sceneVarsRef.has(keysVarName)) {\n        keys = sceneVarsRef.get(keysVarName)\n            .getAllChildrenArray().map(function (item) {\n                return item.getValue();\n            });\n    } else {\n        keys = keysVarName.toString().split(',');\n    }\n} catch (err) {\n    console.warn(err);\n}\n\ngdjs._YandexGamesSDK.setCallback(false, callbackVarName);\n\ntry {\n    gdjs._YandexGamesSDK.getPlayerInstance()\n        .getStats(keys)\n        .then(function (data) {\n            gdjs._YandexGamesSDK.setFunctionContextJsonCallback(JSON.stringify(data), eventsFunctionContext);\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\n        })\n        .catch(function (err) {\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\n            console.warn(err);\n        });\n} catch (err) {\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\n    console.warn(err);\n}\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Keys or global variable name",
          "longDescription": "Keys with comma delimiter e.g. \"key1, key2, key3\" or global variable name that contains array value with keys",
          "name": "KeysOrThatVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global number variable where to store loaded stats",
          "longDescription": "",
          "name": "ResultVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Load the player stats succeeded",
      "fullName": "Load the player stats succeeded",
      "functionType": "Condition",
      "name": "LoadPlayerStatsSucceeded",
      "private": false,
      "sentence": "Load the player stats succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadPlayerStatsResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load the player stats failed",
      "fullName": "Load the player stats failed",
      "functionType": "Condition",
      "name": "LoadPlayerStatsFailed",
      "private": false,
      "sentence": "Load the player stats failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadPlayerStatsResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Save the player stats",
      "fullName": "Save the player stats",
      "functionType": "Action",
      "name": "SavePlayerStats",
      "private": false,
      "sentence": "Save the player stats to _PARAM1_ number variable from variable  _PARAM2_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var callbackVarName = \"SavePlayerStatsResult\";\r\nvar contentVarName = eventsFunctionContext.getArgument(\"ContentVariableName\");\r\nvar contentVar = gdjs._YandexGamesSDK.getGlobalVariable(contentVarName);\r\n\r\ngdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n\r\nif (contentVar && contentVar.isStructure()) {\r\n    try {\r\n        var data = gdjs.evtTools.network.variableStructureToJSON(contentVar);\r\n        gdjs._YandexGamesSDK.getPlayerInstance()\r\n            .setStats(JSON.parse(data))\r\n            .then(function () {\r\n                gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n            })\r\n            .catch(function (err) {\r\n                gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n                console.warn(err);\r\n            })\r\n    } catch (err) {\r\n        gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n        console.warn(err);\r\n    }\r\n}\r\n\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Stats key name (e.g.  \"Lives\" user's numeric data)",
          "longDescription": "",
          "name": "KeyVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Scene structure variable with the content to save",
          "longDescription": "",
          "name": "ContentVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Save the player stats succeeded",
      "fullName": "Save the player stats succeeded",
      "functionType": "Condition",
      "name": "SavePlayerStatsSucceeded",
      "private": false,
      "sentence": "Save the player stats succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_SavePlayerStatsResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Save the player stats failed",
      "fullName": "Save the player stats failed",
      "functionType": "Condition",
      "name": "SavePlayerStatsFailed",
      "private": false,
      "sentence": "Save the player stats failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_SavePlayerStatsResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Increment the player stats",
      "fullName": "Increment the player stats",
      "functionType": "Action",
      "name": "IncrementPlayerStats",
      "private": false,
      "sentence": "Increment the player stats",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var callbackVarName = \"IncrementPlayerStatsResult\";\r\nvar contentVarName = eventsFunctionContext.getArgument(\"ContentVariableName\");\r\nvar contentVar = gdjs._YandexGamesSDK.getGlobalVariable(contentVarName);\r\n\r\ngdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n\r\nif (contentVar && contentVar.isStructure()) {\r\n    try {\r\n        var data = gdjs.evtTools.network.variableStructureToJSON(contentVar);\r\n        gdjs._YandexGamesSDK.getPlayerInstance()\r\n            .incrementStats(JSON.parse(data))\r\n            .then(function () {\r\n                gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n            })\r\n            .catch(function (err) {\r\n                gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n                console.warn(err);\r\n            })\r\n    } catch (err) {\r\n        gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n        console.warn(err);\r\n    }\r\n}\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Stats key name (e.g.  \"Lives\" user's numeric data)",
          "longDescription": "",
          "name": "KeyVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Scene structure variable with the content to save",
          "longDescription": "",
          "name": "ContentVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Increment the player stats succeeded",
      "fullName": "Increment the player stats succeeded",
      "functionType": "Condition",
      "name": "IncrementPlayerStatsSucceeded",
      "private": false,
      "sentence": "Increment the player stats succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_IncrementPlayerStatsResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Increment the player stats failed",
      "fullName": "Increment the player stats failed",
      "functionType": "Condition",
      "name": "IncrementPlayerStatsFailed",
      "private": false,
      "sentence": "Increment the player stats failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_IncrementPlayerStatsResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load the data from the safe storage (to avoid progress loss on iOS)",
      "fullName": "Load the data from the safe storage (to avoid progress loss on iOS)",
      "functionType": "Action",
      "name": "LoadDataFromSafeStorage",
      "private": false,
      "sentence": "Load the data from the safe storage _PARAM1_ from variable  _PARAM2_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var callbackVarName = \"LoadDataToSafeStorageResult\";\r\nvar keyVarName = eventsFunctionContext.getArgument(\"KeyVariableName\");\r\nvar keyVar = gdjs._YandexGamesSDK.getGlobalVariable(keyVarName).getAsString();\r\n\r\ngdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getInstance()\r\n        .getStorage()\r\n        .then(function (safeStorage) {\r\n            var data = safeStorage.getItem(keyVar);\r\n\r\n            if (data !== undefined && data !== null) {\r\n                gdjs._YandexGamesSDK.setFunctionContextJsonCallback(data, _eventsFunctionContext)\r\n            }\r\n            \r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n        })\r\n        .catch(function (error) {\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n            console.warn(err);\r\n        });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n    console.warn(err);\r\n}\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Data key name (e.g. \"Lives\")",
          "longDescription": "",
          "name": "KeyVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global number, string or structure variable where to store loaded data",
          "longDescription": "",
          "name": "ResultVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Save the data to the safe storage (to avoid progress loss on iOS)",
      "fullName": "Save the data to the safe storage (to avoid progress loss on iOS)",
      "functionType": "Action",
      "name": "SaveDataToSafeStorage",
      "private": false,
      "sentence": "Save the data to the safe storage _PARAM1_ from variable  _PARAM2_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var globalvars = runtimeScene.getGame().getVariables();\r\nvar scenevars = runtimeScene.getVariables();\r\nvar _callbackVariableName = \"YaGamesJsSdk_SaveDataToSafeStorageResult\";\r\n\r\nfunction setCallback(isSuccess) {\r\n    var state = isSuccess ? \"ok\" : \"error\";\r\n    var callbackVariableName = eventsFunctionContext.getArgument(\"CallbackVariableName\");\r\n    if (callbackVariableName) {\r\n        var callbackVariable = globalvars.get(callbackVariableName);\r\n        callbackVariable.setString(state);\r\n        globalvars.add(callbackVariableName, callbackVariable);\r\n    }\r\n\r\n    // extension variable \r\n    if (_callbackVariableName) {\r\n        var _callbackVariable = globalvars.get(_callbackVariableName);\r\n        _callbackVariable.setString(state);\r\n        globalvars.add(_callbackVariableName, _callbackVariable);\r\n    }\r\n}\r\n\r\nvar variableName = eventsFunctionContext.getArgument(\"KeyVariableName\");\r\nvar variable = globalvars.get(variableName).getAsString();\r\nvar contentVariableName = eventsFunctionContext.getArgument(\"ContentVariableName\");\r\nvar contentVariable = scenevars.get(contentVariableName);\r\n\r\nif (contentVariable && contentVariable.isStructure()) {\r\n    try {\r\n        yagames_jssdk.getStorage()\r\n            .then(safeStorage => {\r\n                if (contentVariable.isPrimitive()) {\r\n                    safeStorage.setItem(variable, contentVariable.getAsString());\r\n                    console.log(safeStorage.getItem(variable))\r\n                } else if (contentVariable.isStructure()) {\r\n                    var data = gdjs.evtTools.network.variableStructureToJSON(contentVariable);\r\n                    safeStorage.setItem(variable, JSON.stringify(data));\r\n                    console.log(safeStorage.getItem(variable))\r\n                }\r\n            })\r\n            .catch(error => {\r\n                setCallback(false);\r\n                console.error(err);\r\n            });\r\n    } catch (err) {\r\n        setCallback(false);\r\n        console.error(err);\r\n    }\r\n}\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Data key name (e.g. \"Lives\")",
          "longDescription": "",
          "name": "KeyVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Scene number, string or structure variable with the content to save",
          "longDescription": "",
          "name": "ContentVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Init payments",
      "fullName": "Init payments",
      "functionType": "Action",
      "name": "InitPayments",
      "private": false,
      "sentence": "Init payments",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var callbackVarName = \"InitPaymentsResult\";\r\n\r\ngdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getPayments({ signed: true })\r\n        .then(function (payments) {\r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n            gdjs._YandexGamesSDK.setPaymentsInstance(payments);\r\n        })\r\n        .catch(function (err) {\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n            console.warn(err);\r\n        });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n    console.warn(err);\r\n}\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Payments initialized",
      "fullName": "Payments initialized",
      "functionType": "Condition",
      "name": "PaymentsInitialized",
      "private": false,
      "sentence": "Payments initialized",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "if (gdjs._YandexGamesSDK.getPaymentsInstance() !== undefined) {\r\n    eventsFunctionContext.returnValue = true;\r\n}\r\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load all player purchases",
      "fullName": "Load all player purchases",
      "functionType": "Action",
      "name": "LoadAllPlayerPurchases",
      "private": false,
      "sentence": "Load all player purchases to _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PaymentsInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var lbName = eventsFunctionContext.getArgument(\"Name\");\r\nvar quantityTop = parseInt(eventsFunctionContext.getArgument(\"QuantityTop\"));\r\nvar isIncludeUser = !!eventsFunctionContext.getArgument(\"IncludePlayer\");\r\nvar quantityAround = parseInt(eventsFunctionContext.getArgument(\"QuantityAround\"));\r\nvar callbackVarName = \"LoadLeaderboardEntriesResult\";\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getInstance()\r\n        .then(function (lb) {\r\n            const options = { includeUser: isIncludeUser };\r\n\r\n            if (quantityTop >= 1) {\r\n                options[\"quantityTop\"] = quantityTop;\r\n            }\r\n            if (quantityAround >= 1) {\r\n                options[\"quantityAround\"] = quantityAround;\r\n            }\r\n\r\n            return lb.getLeaderboardEntries(lbName, options);\r\n        })\r\n        .then(function (res) {\r\n            gdjs._YandexGamesSDK.setFunctionContextJsonCallback(JSON.stringify(res), eventsFunctionContext);\r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n        })\r\n        .catch(function (err) {\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n            console.warn(err);\r\n        });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n    console.warn(err);\r\n}\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global structure variable where to store loaded purchases",
          "longDescription": "",
          "name": "ResultVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Load all player`s purchases succeeded",
      "fullName": "Load all player`s purchases succeeded",
      "functionType": "Condition",
      "name": "LoadAllPlayerPurchasesSucceeded",
      "private": false,
      "sentence": "Load all player`s purchases succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadAllPlayerPurchasesResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load all player`s purchases failed",
      "fullName": "Load all player`s purchases failed",
      "functionType": "Condition",
      "name": "LoadAllPlayerPurchasesFailed",
      "private": false,
      "sentence": "Load all player`s purchases failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadAllPlayerPurchasesResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load the purchase by ID",
      "fullName": "Load the purchase by ID",
      "functionType": "Action",
      "name": "LoadPlayerPurchaseByID",
      "private": false,
      "sentence": "Load the purchase by ID _PARAM1_ to _PARAM2_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PaymentsInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var purchaseID = eventsFunctionContext.getArgument(\"PurchaseID\");\r\nvar callbackVarName = \"LoadPlayerPurchaseByIDResult\";\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getInstance()\r\n        .getPurchases()\r\n        .then(function (purchases) {\r\n            if (purchases.some(function (purchase) { return purchase.productID === purchaseID })) {\r\n                var finded = purchases.filter(function (purchase) {\r\n                    return purchase.productID === eventsFunctionContext.getArgument(\"ID\")\r\n                });\r\n\r\n                gdjs._YandexGamesSDK.setFunctionContextJsonCallback(JSON.stringify(finded[0]), eventsFunctionContext);\r\n            }\r\n\r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n        })\r\n        .catch(function (err) {\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n            console.warn(err);\r\n        });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n    console.warn(err);\r\n}\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "The purchase (product) ID (e.g. \"disable_ads\")",
          "longDescription": "",
          "name": "PurchaseID",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global structure variable where to store loaded purchases",
          "longDescription": "",
          "name": "ResultVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Load player`s purchase by ID succeeded",
      "fullName": "Load player`s purchase by ID succeeded",
      "functionType": "Condition",
      "name": "LoadPlayerPurchaseByIDSucceeded",
      "private": false,
      "sentence": "Load player`s purchase by ID succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadPlayerPurchaseByIDResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load player`s purchase by ID failed",
      "fullName": "Load player`s purchase by ID failed",
      "functionType": "Condition",
      "name": "LoadPlayerPurchaseByIDFailed",
      "private": false,
      "sentence": "Load player`s purchase by ID failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadPlayerPurchaseByIDResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Purchase",
      "fullName": "Purchase",
      "functionType": "Action",
      "name": "Purchase",
      "private": false,
      "sentence": "Purchase",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PaymentsInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var purchaseID = eventsFunctionContext.getArgument(\"PurchaseID\");\r\nvar callbackVarName = \"PurchaseResult\";\r\nvar callbackVarNameWithID = callbackVarName + purchaseID;\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getPaymentsInstance().purchase({ id: purchaseID })\r\n        .then(function (purchase) {\r\n            gdjs._YandexGamesSDK.setFunctionContextJsonCallback(JSON.stringify(purchase), eventsFunctionContext);\r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarNameWithID);\r\n        })\r\n        .catch(function (err) {\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarNameWithID);\r\n            console.warn(err);\r\n        });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarNameWithID);\r\n    console.warn(err);\r\n}\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "The purchase (product) ID (e.g. \"disable_ads\")",
          "longDescription": "",
          "name": "PurchaseID",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global structure variable where to store the loaded purchase data",
          "longDescription": "",
          "name": "ResultVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Purchase succeeded",
      "fullName": "Purchase succeeded",
      "functionType": "Condition",
      "name": "PurchaseSucceeded",
      "private": false,
      "sentence": "Purchase succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PaymentsInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "BuiltinCommonInstructions::Or"
                  },
                  "parameters": [],
                  "subInstructions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "BuiltinCommonInstructions::And"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "inverted": false,
                            "value": "GetArgumentAsBoolean"
                          },
                          "parameters": [
                            "\"PurchaseID\""
                          ],
                          "subInstructions": []
                        },
                        {
                          "type": {
                            "inverted": false,
                            "value": "VarGlobalTxt"
                          },
                          "parameters": [
                            "__YandexGamesSDK_PurchaseResult + GetArgumentAsString(PurchaseID)",
                            "=",
                            "\"ok\""
                          ],
                          "subInstructions": []
                        }
                      ]
                    },
                    {
                      "type": {
                        "inverted": false,
                        "value": "BuiltinCommonInstructions::And"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "inverted": true,
                            "value": "GetArgumentAsBoolean"
                          },
                          "parameters": [
                            "\"PurchaseID\""
                          ],
                          "subInstructions": []
                        },
                        {
                          "type": {
                            "inverted": false,
                            "value": "VarGlobalTxt"
                          },
                          "parameters": [
                            "__YandexGamesSDK_PurchaseResult",
                            "=",
                            "\"ok\""
                          ],
                          "subInstructions": []
                        }
                      ]
                    }
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetReturnBoolean"
                  },
                  "parameters": [
                    "True"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "The purchase (product) ID (optional, e.g. \"disable_ads\", when not set then last purchase will be check)",
          "longDescription": "",
          "name": "PurchaseID",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Purchase failed",
      "fullName": "Purchase failed",
      "functionType": "Condition",
      "name": "PurchaseFailed",
      "private": false,
      "sentence": "Purchase failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PaymentsInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "BuiltinCommonInstructions::Or"
                  },
                  "parameters": [],
                  "subInstructions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "BuiltinCommonInstructions::And"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "inverted": false,
                            "value": "GetArgumentAsBoolean"
                          },
                          "parameters": [
                            "\"PurchaseID\""
                          ],
                          "subInstructions": []
                        },
                        {
                          "type": {
                            "inverted": false,
                            "value": "VarGlobalTxt"
                          },
                          "parameters": [
                            "__YandexGamesSDK_PurchaseResult + GetArgumentAsString(PurchaseID)",
                            "=",
                            "\"error\""
                          ],
                          "subInstructions": []
                        }
                      ]
                    },
                    {
                      "type": {
                        "inverted": false,
                        "value": "BuiltinCommonInstructions::And"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "inverted": true,
                            "value": "GetArgumentAsBoolean"
                          },
                          "parameters": [
                            "\"PurchaseID\""
                          ],
                          "subInstructions": []
                        },
                        {
                          "type": {
                            "inverted": false,
                            "value": "VarGlobalTxt"
                          },
                          "parameters": [
                            "__YandexGamesSDK_PurchaseResult",
                            "=",
                            "\"error\""
                          ],
                          "subInstructions": []
                        }
                      ]
                    }
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetReturnBoolean"
                  },
                  "parameters": [
                    "True"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "The purchase (product) ID (optional, e.g. \"disable_ads\", when not set then last purchase will be check)",
          "longDescription": "",
          "name": "PurchaseID",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Load all available purchases and their cost",
      "fullName": "Load all available purchases and their cost",
      "functionType": "Action",
      "name": "LoadAllAvailablePurchases",
      "private": false,
      "sentence": "Load all available purchases and their cost to _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PaymentsInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var purchaseID = eventsFunctionContext.getArgument(\"PurchaseID\");\r\nvar callbackVarName = \"LoadAllAvailablePurchasesResult\";\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getPaymentsInstance().getCatalog()\r\n        .then(function (purchases) {\r\n            gdjs._YandexGamesSDK.setFunctionContextJsonCallback(JSON.stringify(purchase), eventsFunctionContext);\r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n        })\r\n        .catch(function (err) {\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n            console.warn(err);\r\n        });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n    console.warn(err);\r\n}\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global array variable where to store loaded available purchases",
          "longDescription": "",
          "name": "ResultVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Load all available purchase succeeded",
      "fullName": "Load all available purchase succeeded",
      "functionType": "Condition",
      "name": "LoadAllAvailablePurchasesSucceeded",
      "private": false,
      "sentence": "Load all available purchase succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadAllAvailablePurchasesResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load all available purchase succeeded",
      "fullName": "Load all available purchase succeeded",
      "functionType": "Condition",
      "name": "LoadAllAvailablePurchasesFailed",
      "private": false,
      "sentence": "Load all available purchase succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadAllAvailablePurchasesResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Init leaderboards",
      "fullName": "Init leaderboards",
      "functionType": "Action",
      "name": "InitLeaderboards",
      "private": false,
      "sentence": "Init leaderboards",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "var globalvars = runtimeScene.getGame().getVariables();\r\nvar scenevars = runtimeScene.getVariables();\r\nvar _callbackVariableName = \"YaGamesJsSdk_InitLeaderboardsResult\";\r\n\r\nfunction setCallback(isSuccess) {\r\n    var state = isSuccess ? \"ok\" : \"error\";\r\n    var callbackVariableName = eventsFunctionContext.getArgument(\"CallbackVariableName\");\r\n    if (callbackVariableName) {\r\n        var callbackVariable = globalvars.get(callbackVariableName);\r\n        callbackVariable.setString(state);\r\n        globalvars.add(callbackVariableName, callbackVariable);\r\n    }\r\n}\r\n\r\nsetCallback(false);\r\n\r\ntry {\r\n    yagames_jssdk.getLeaderboards()\r\n        .then(_lb => {\r\n            window[\"yagames_jssdk_lb\"] = _lb;\r\n            setCallback(true);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            setCallback(false);\r\n        });\r\n} catch (err) {\r\n    setCallback(false);\r\n    console.error(err);\r\n}\r\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Leaderboards initialized",
      "fullName": "Leaderboards initialized",
      "functionType": "Condition",
      "name": "LeaderboardsInitialized",
      "private": false,
      "sentence": "Leaderboards initialized",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "if (window[\"yagames_jssdk_lb\"] !== undefined) {\r\n    eventsFunctionContext.returnValue = true;\r\n}\r\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load the Leaderboard",
      "fullName": "Load the Leaderboard",
      "functionType": "Action",
      "name": "LoadLeaderboard",
      "private": false,
      "sentence": "Load the Leaderboard by name _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var globalvars = runtimeScene.getGame().getVariables();\r\nvar scenevars = runtimeScene.getVariables();\r\nvar _callbackVariableName = \"YaGamesJsSdk_LoadLeaderboardResult\";\r\n\r\nfunction setCallback(isSuccess) {\r\n    var state = isSuccess ? \"ok\" : \"error\";\r\n    var callbackVariableName = eventsFunctionContext.getArgument(\"CallbackVariableName\");\r\n    if (callbackVariableName) {\r\n        var callbackVariable = globalvars.get(callbackVariableName);\r\n        callbackVariable.setString(state);\r\n        globalvars.add(callbackVariableName, callbackVariable);\r\n    }\r\n\r\n    // extension variable \r\n    if (_callbackVariableName) {\r\n        var _callbackVariable = globalvars.get(_callbackVariableName);\r\n        _callbackVariable.setString(state);\r\n        globalvars.add(_callbackVariableName, _callbackVariable);\r\n    }\r\n}\r\n\r\nfunction setJsonResult(json) {\r\n    var resultVariableName = eventsFunctionContext.getArgument(\"ResultVariableName\");\r\n    if (resultVariableName) {\r\n        var resultVariable = globalvars.get(resultVariableName);\r\n        gdjs.evtTools.network.jsonToVariableStructure(json, resultVariable);\r\n        globalvars.add(resultVariableName, resultVariable);\r\n    }\r\n}\r\n\r\nvar lbName = eventsFunctionContext.getArgument(\"Name\");\r\n\r\nsetCallback(false);\r\n\r\ntry {\r\n    yagames_jssdk.getLeaderboards()\r\n        .then(lb => {\r\n            return lb.getLeaderboardDescription(lbName);\r\n        })\r\n        .then(res => {\r\n            console.log(res);\r\n            setCallback(true);\r\n        })\r\n        .catch(err => {\r\n            setCallback(false);\r\n            console.log(err);\r\n        });\r\n} catch (err) {\r\n    setCallback(false);\r\n    console.error(err);\r\n}\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Competition table name (e.g. \"leaderboard2021\")",
          "longDescription": "",
          "name": "Name",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global structure variable where to store loaded leaderboard",
          "longDescription": "",
          "name": "ResultVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Save the leaderboard score",
      "fullName": "Save the leaderboard score",
      "functionType": "Action",
      "name": "SaveLeaderboardScore",
      "private": false,
      "sentence": "Save the leaderboard _PARAM1_ score _PARAM2_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var lbName = eventsFunctionContext.getArgument(\"Name\");\r\nvar score = parseInt(eventsFunctionContext.getArgument(\"Score\"));\r\nvar callbackVarName = \"SaveLeaderboardScoreResult\";\r\n\r\ngdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getInstance().getLeaderboards()\r\n        .then(lb => {\r\n            lb.setLeaderboardScore(lbName, score);\r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n        })\r\n        .catch(err => {\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n            console.warn(err);\r\n        });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n    console.warn(err);\r\n}\r\n\r\n/*\r\nvar globalvars = runtimeScene.getGame().getVariables();\r\nvar scenevars = runtimeScene.getVariables();\r\nvar _callbackVariableName = \"YaGamesJsSdk_SaveLeaderboardScoreResult\";\r\n\r\nfunction setCallback(isSuccess) {\r\n    var state = isSuccess ? \"ok\" : \"error\";\r\n    var callbackVariableName = eventsFunctionContext.getArgument(\"CallbackVariableName\");\r\n    if (callbackVariableName) {\r\n        var callbackVariable = globalvars.get(callbackVariableName);\r\n        callbackVariable.setString(state);\r\n        globalvars.add(callbackVariableName, callbackVariable);\r\n    }\r\n\r\n    // extension variable \r\n    if (_callbackVariableName) {\r\n        var _callbackVariable = globalvars.get(_callbackVariableName);\r\n        _callbackVariable.setString(state);\r\n        globalvars.add(_callbackVariableName, _callbackVariable);\r\n    }\r\n}\r\n\r\nfunction setJsonResult(json) {\r\n    var resultVariableName = eventsFunctionContext.getArgument(\"ResultVariableName\");\r\n    if (resultVariableName) {\r\n        var resultVariable = globalvars.get(resultVariableName);\r\n        gdjs.evtTools.network.jsonToVariableStructure(json, resultVariable);\r\n        globalvars.add(resultVariableName, resultVariable);\r\n    }\r\n}\r\n\r\nvar lbName = eventsFunctionContext.getArgument(\"Name\");\r\nvar score = parseInt(eventsFunctionContext.getArgument(\"Score\"));\r\n\r\nsetCallback(false);\r\n\r\ntry {\r\n    yagames_jssdk.getLeaderboards()\r\n        .then(lb => {\r\n            lb.setLeaderboardScore(lbName, score);\r\n            setCallback(true);\r\n        })\r\n        .catch(err => {\r\n            setCallback(false);\r\n            console.log(err);\r\n        });\r\n} catch (err) {\r\n    setCallback(false);\r\n    console.error(err);\r\n}\r\n*/\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Competition table name (e.g. \"leaderboard2021\")",
          "longDescription": "",
          "name": "Name",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Score. Must be greater than 0. If the table type is time, the values must be passed in milliseconds.",
          "longDescription": "",
          "name": "Score",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Save leaderboard succeeded",
      "fullName": "Save leaderboard succeeded",
      "functionType": "Condition",
      "name": "SaveLeaderboardSucceeded",
      "private": false,
      "sentence": "Save leaderboard succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_SaveLeaderboardScoreResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Save leaderboard failed",
      "fullName": "Save leaderboard failed",
      "functionType": "Condition",
      "name": "SaveLeaderboardFailed",
      "private": false,
      "sentence": "Save leaderboard failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_SaveLeaderboardScoreResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load the Player ranking",
      "fullName": "Load the Player ranking",
      "functionType": "Action",
      "name": "LoadPlayerRanking",
      "private": false,
      "sentence": "Load the Player ranking of _PARAM1_ to _PARAM2_ global variable",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var lbName = eventsFunctionContext.getArgument(\"Name\");\r\nvar callbackVarName = \"LoadPlayerRankingResult\";\r\n\r\ngdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getInstance().getLeaderboards()\r\n        .then(function (lb) {\r\n            return lb.getLeaderboardPlayerEntry(lbName);\r\n        })\r\n        .then(function (res) {\r\n            gdjs._YandexGamesSDK.setFunctionContextJsonCallback(JSON.stringify(res), eventsFunctionContext);\r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n        })\r\n        .catch(function (err) {\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n            console.warn(err);\r\n\r\n            if (err.code === 'LEADERBOARD_PLAYER_NOT_PRESENT') {\r\n                // Triggers if the leaderboard doesn't contain an entry for the player\r\n            }\r\n        });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n    console.warn(err);\r\n}\r\n\r\n/*\r\nvar globalvars = runtimeScene.getGame().getVariables();\r\nvar scenevars = runtimeScene.getVariables();\r\nvar _callbackVariableName = \"YaGamesJsSdk_LoadPlayerRankingResult\";\r\n\r\nfunction setCallback(isSuccess) {\r\n    var state = isSuccess ? \"ok\" : \"error\";\r\n    var callbackVariableName = eventsFunctionContext.getArgument(\"CallbackVariableName\");\r\n    if (callbackVariableName) {\r\n        var callbackVariable = globalvars.get(callbackVariableName);\r\n        callbackVariable.setString(state);\r\n        globalvars.add(callbackVariableName, callbackVariable);\r\n    }\r\n\r\n    // extension variable \r\n    if (_callbackVariableName) {\r\n        var _callbackVariable = globalvars.get(_callbackVariableName);\r\n        _callbackVariable.setString(state);\r\n        globalvars.add(_callbackVariableName, _callbackVariable);\r\n    }\r\n}\r\n\r\nfunction setJsonResult(json) {\r\n    var resultVariableName = eventsFunctionContext.getArgument(\"ResultVariableName\");\r\n    if (resultVariableName) {\r\n        var resultVariable = globalvars.get(resultVariableName);\r\n        gdjs.evtTools.network.jsonToVariableStructure(json, resultVariable);\r\n        globalvars.add(resultVariableName, resultVariable);\r\n    }\r\n}\r\n\r\nvar lbName = eventsFunctionContext.getArgument(\"Name\");\r\n\r\nsetCallback(false);\r\n\r\ntry {\r\n    yagames_jssdk.getLeaderboards()\r\n        .then(lb => {\r\n            return lb.getLeaderboardPlayerEntry(lbName);\r\n        })\r\n        .then(res => {\r\n            setJsonResult(JSON.stringify(res));\r\n            setCallback(true);\r\n        })\r\n        .catch(err => {\r\n            setCallback(false);\r\n            console.log(err);\r\n\r\n            if (err.code === 'LEADERBOARD_PLAYER_NOT_PRESENT') {\r\n                // Triggers if the leaderboard doesn't contain an entry for the player\r\n            }\r\n        });\r\n} catch (err) {\r\n    setCallback(false);\r\n    console.error(err);\r\n}\r\n*/",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Competition table name (e.g. \"leaderboard2021\")",
          "longDescription": "",
          "name": "Name",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global structure variable where to store loaded player ranking",
          "longDescription": "",
          "name": "ResultVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Load the Player ranking succeeded",
      "fullName": "Load the Player ranking succeeded",
      "functionType": "Condition",
      "name": "LoadPlayerRankingSucceeded",
      "private": false,
      "sentence": "Load the Player ranking succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadPlayerRankingResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load the Player ranking failed",
      "fullName": "Load the Player ranking failed",
      "functionType": "Condition",
      "name": "LoadPlayerRankingFailed",
      "private": false,
      "sentence": "Load the Player ranking failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadPlayerRankingResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load the Leaderboard entries",
      "fullName": "Load the Leaderboard entries",
      "functionType": "Action",
      "name": "LoadLeaderboardEntries",
      "private": false,
      "sentence": "Load the Leaderboard by name _PARAM1_ entries",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "YandexGamesSDK_pre_1::PlayerInitialized"
              },
              "parameters": [
                "",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "var lbName = eventsFunctionContext.getArgument(\"Name\");\r\nvar quantityTop = parseInt(eventsFunctionContext.getArgument(\"QuantityTop\"));\r\nvar isIncludeUser = !!eventsFunctionContext.getArgument(\"IncludePlayer\");\r\nvar quantityAround = parseInt(eventsFunctionContext.getArgument(\"QuantityAround\"));\r\nvar callbackVarName = \"LoadLeaderboardEntriesResult\";\r\n\r\ntry {\r\n    gdjs._YandexGamesSDK.getInstance()\r\n        .then(function (lb) {\r\n            const options = { includeUser: isIncludeUser };\r\n\r\n            if (quantityTop >= 1) {\r\n                options[\"quantityTop\"] = quantityTop;\r\n            }\r\n            if (quantityAround >= 1) {\r\n                options[\"quantityAround\"] = quantityAround;\r\n            }\r\n\r\n            return lb.getLeaderboardEntries(lbName, options);\r\n        })\r\n        .then(function (res) {\r\n            gdjs._YandexGamesSDK.setFunctionContextJsonCallback(JSON.stringify(res), eventsFunctionContext);\r\n            gdjs._YandexGamesSDK.setCallback(true, callbackVarName);\r\n        })\r\n        .catch(function (err) {\r\n            gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n            console.warn(err);\r\n        });\r\n} catch (err) {\r\n    gdjs._YandexGamesSDK.setCallback(false, callbackVarName);\r\n    console.warn(err);\r\n}\r\n\r\n/*\r\nvar globalvars = runtimeScene.getGame().getVariables();\r\nvar scenevars = runtimeScene.getVariables();\r\nvar _callbackVariableName = \"YaGamesJsSdk_LoadLeaderboardEntriesResult\";\r\n\r\nfunction setCallback(isSuccess) {\r\n    var state = isSuccess ? \"ok\" : \"error\";\r\n    var callbackVariableName = eventsFunctionContext.getArgument(\"CallbackVariableName\");\r\n    if (callbackVariableName) {\r\n        var callbackVariable = globalvars.get(callbackVariableName);\r\n        callbackVariable.setString(state);\r\n        globalvars.add(callbackVariableName, callbackVariable);\r\n    }\r\n\r\n    // extension variable \r\n    if (_callbackVariableName) {\r\n        var _callbackVariable = globalvars.get(_callbackVariableName);\r\n        _callbackVariable.setString(state);\r\n        globalvars.add(_callbackVariableName, _callbackVariable);\r\n    }\r\n}\r\n\r\nfunction setJsonResult(json) {\r\n    var resultVariableName = eventsFunctionContext.getArgument(\"ResultVariableName\");\r\n    if (resultVariableName) {\r\n        var resultVariable = globalvars.get(resultVariableName);\r\n        gdjs.evtTools.network.jsonToVariableStructure(json, resultVariable);\r\n        globalvars.add(resultVariableName, resultVariable);\r\n    }\r\n}\r\n\r\nvar lbName = eventsFunctionContext.getArgument(\"Name\");\r\nvar quantityTop = parseInt(eventsFunctionContext.getArgument(\"QuantityTop\"));\r\nvar isIncludeUser = !!eventsFunctionContext.getArgument(\"IncludePlayer\");\r\nvar quantityAround = parseInt(eventsFunctionContext.getArgument(\"QuantityAround\"));\r\n\r\nsetCallback(false);\r\n\r\ntry {\r\n    yagames_jssdk.getLeaderboards()\r\n        .then(lb => {\r\n            const options = { includeUser: isIncludeUser };\r\n\r\n            if (quantityTop >= 1) {\r\n                options[\"quantityTop\"] = quantityTop;\r\n            }\r\n            if (quantityAround >= 1) {\r\n                options[\"quantityAround\"] = quantityAround;\r\n            }\r\n\r\n            return lb.getLeaderboardEntries(lbName, options);\r\n        })\r\n        .then(res => {\r\n            console.log(res);\r\n            setJsonResult(JSON.stringify(res));\r\n            setCallback(true);\r\n        })\r\n        .catch(err => {\r\n            setCallback(false);\r\n            console.log(err);\r\n        });\r\n} catch (err) {\r\n    setCallback(false);\r\n    console.error(err);\r\n}\r\n*/\r\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Competition table name (e.g. \"leaderboard2021\")",
          "longDescription": "",
          "name": "Name",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global structure variable where to store loaded leaderboard entries",
          "longDescription": "",
          "name": "ResultVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Quantity top",
          "longDescription": "Number of entries from the top of the table. The minimum value is 1, the maximum value is 20. The default is 5.",
          "name": "QuantityTop",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Yes if whether to include the logged-in user?",
          "longDescription": "",
          "name": "IncludePlayer",
          "optional": false,
          "supplementaryInformation": "",
          "type": "yesorno"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Quantity around",
          "longDescription": "Number of entries to return below and above the user. The minimum value is 1, the maximum value is 20. The default is 5.",
          "name": "QuantityAround",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Global variable where to store the variable with state (ok or error)",
          "longDescription": "",
          "name": "CallbackVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Load leaderboards entries succeeded",
      "fullName": "Load leaderboards entries succeeded",
      "functionType": "Condition",
      "name": "LoadLeaderboardsEntriesSucceeded",
      "private": false,
      "sentence": "Load leaderboards entries succeeded",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadLeaderboardEntriesResult",
                "=",
                "\"ok\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Load leaderboards entries failed",
      "fullName": "Load leaderboards entries failed",
      "functionType": "Condition",
      "name": "LoadLeaderboardsEntriesFailed",
      "private": false,
      "sentence": "Load leaderboards entries failed",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobalTxt"
              },
              "parameters": [
                "__YandexGamesSDK_LoadLeaderboardEntriesResult",
                "=",
                "\"error\""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Request the Game review",
      "fullName": "Request the Game review",
      "functionType": "Action",
      "name": "RequestGameReview",
      "private": false,
      "sentence": "Request the Game review",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "gdjs._YandexGamesSDK.getInstance().feedback.canReview()\r\n    .then(function (res) {\r\n        if (res.value) {\r\n            gdjs._YandexGamesSDK.getInstance().feedback.requestReview()\r\n                .then(function (res) {\r\n                    console.log(res.feedbackSent);\r\n                });\r\n        } else {\r\n            console.log(res.reason);\r\n        }\r\n    });",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [
    {
      "description": "",
      "fullName": "",
      "name": "MyBehavior",
      "objectType": "",
      "eventsFunctions": [],
      "propertyDescriptors": []
    }
  ]
}